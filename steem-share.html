<html>
  <head>

  <style>
    * {box-sizing: border-box;}
    body {
      margin: 0, padding: 0;
      font-family: inconsolate, 'courier new', courier, monospace;
    }
    .ss-overlay {
      display: none;
      position: fixed;
      top: 0; right: 0; bottom: 0; left:0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
    }
    .ss-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background-color: #fff;
      z-index: 1100;
      width: 400px;
      max-width: 70%;
      padding: 10px 10px;
      text-align: center;
      border-radius: 4px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
    }
    .ss-heading-2 {
      margin: 20px 0 5px;
    }
    .ss-p {
      margin: 5px 0 30px;

    }
    .ss-username {
      display: block;
      margin: 15px auto;
      padding: 8px 20px;
      text-align: center;
      max-width: 85%;
      width: 100%;
      border-radius: 4px;
      border: solid 1px #3498db;
    }
    .ss-username:focus {
      outline: 0;
    }
    .ss-steemconnect-btn {
      display: block;
      margin: 15px auto;
      padding: 8px 20px;
      text-decoration: none;
      background: #3498db;
      color: #fff;
      width: 100%;
      max-width: 85%;
      border-radius: 4px;
    }
    .ss-close-modal {
      position: absolute;
      top: 5px;
      right: 10px;
      transform: rotate(45deg);
      font-size: 40px;
      line-height: 1;
      cursor: pointer;
    }
  </style>
  </head>
  <body>

    Hello world
    <br>
    <br>
    <button class="ss-steem-share"
    data-title="This is a test from steem share",
    data-category="testing-testing",
    data-imgUrl="https://i.imgsafe.org/a7/a751d45421.jpeg",
    data-content="Well would you look at that, I think this will be a pretty cool addition to the eco-system"
    >Share To Steem -></button>


    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

    <script>
    let modalTemplate =
      `<div class="ss-modal">
          <h2 class="ss-heading-2">Steem Share</h2>
          <p class="ss-p">Enter your username</p>
          <input class="ss-username" type="text" placeholder="username">
          <a class="ss-steemconnect-btn" href="#" target="_blank">Post With Steemconnect</a>
          <span class="ss-close-modal">&#43;</span>
        </div>
        <div class="ss-overlay"></div>`;

    $('body').append(modalTemplate)

    $('.ss-steem-share').on('click', (e) => {
        $('.ss-modal, .ss-overlay').fadeIn(200);
    })

    $('.ss-close-modal').on('click', (e) => {
        $('.ss-modal, .ss-overlay').fadeOut(200);
    })

     $('.ss-username').keyup(( e ) => {

       // update steem connect link
       let data = $('.ss-steem-share').data()
       let shareDetails = {
         category: data.category,
         author: $('.ss-username').val(),
         permlink: randomString() + '-post',
         title: data.title,
         body: data.content,
       }
       console.log(shareDetails)
       let steemconnectLink = `https://v2.steemconnect.com/sign/comment?parent_permlink=${shareDetails.category}&author=${shareDetails.author}&permlink=${shareDetails.permlink}&title=${shareDetails.title}&body=${shareDetails.body}`
       console.log(steemconnectLink)

      $('.ss-steemconnect-btn').attr('href', steemconnectLink);

     });

     function randomString() {
       let string = ''
       let allowedChars = "abcdefghijklmnopqrstuvwxyz0123456789";
       for (var i = 0; i < 32; i++){
         string += allowedChars.charAt(Math.floor(Math.random() * allowedChars.length));
       }
       return string;
   }

/*
  -> Click on Post To Steem Button
  -> modal posts up to enter username
  -> connects to steem connect - get access for posting rights
  -> posts content to their steem feed
  ->
  -> plugin include {
  	showReSteem: False,
  	showPostToSteem: True,
  	imageUrl: ‘’,
  	postContent: ‘’,
    category: '',
  	allowUserAddition: true,
    includeTopLink: true
  }

*/

//
    </script>
  </body>
</html>
